<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-0EMVKTQQ7V"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'G-0EMVKTQQ7V');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Energy Savings Calculator - EcoSync Solutions</title>
    <style>
        /* --- CSS STYLES (LIGHT MODE) --- */
        body { font-family: 'Segoe UI', Roboto, sans-serif; background-color: #f4f7f6; color: #333; text-align: center; padding: 0; margin: 0; }

        /* Navigation */
        nav {
            background-color: #130f0a;
            padding: 1rem 0;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            position: sticky;
            top: 0;
            z-index: 1000;
            text-align: left;
        }

        nav .nav-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 0 20px;
        }

        nav .logo {
            color: #ff9800;
            font-size: 1.8rem;
            font-weight: bold;
            text-decoration: none;
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 2rem;
            margin: 0;
            padding: 0;
        }

        /* Hamburger Menu */
        .hamburger {
            display: none;
            flex-direction: column;
            cursor: pointer;
            padding: 5px;
            z-index: 1001;
        }

        .hamburger span {
            width: 25px;
            height: 3px;
            background-color: #ff9800;
            margin: 3px 0;
            transition: 0.3s;
            border-radius: 2px;
        }

        .hamburger.active span:nth-child(1) {
            transform: rotate(-45deg) translate(-5px, 6px);
        }

        .hamburger.active span:nth-child(2) {
            opacity: 0;
        }

        .hamburger.active span:nth-child(3) {
            transform: rotate(45deg) translate(-5px, -6px);
        }

        .nav-menu {
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        nav a {
            color: #fff;
            text-decoration: none;
            font-weight: 500;
            transition: color 0.3s;
        }

        nav a:hover {
            color: #ff9800;
        }

        @media (max-width: 768px) {
            .hamburger {
                display: flex;
            }

            .nav-menu {
                position: fixed;
                left: -100%;
                top: 60px;
                flex-direction: column;
                background-color: #130f0a;
                width: 100%;
                text-align: center;
                transition: 0.3s;
                box-shadow: 0 10px 27px rgba(0, 0, 0, 0.05);
                padding: 2rem 0;
                gap: 0;
                z-index: 999;
            }

            .nav-menu.active {
                left: 0;
            }

            nav ul {
                flex-direction: column;
                gap: 0;
                width: 100%;
            }

            nav ul li {
                margin: 1rem 0;
            }

            .lang-btn {
                margin-left: 0;
                margin-top: 1rem;
            }

            nav .logo { font-size: 1.5rem; }
        }

        .container { max-width: 480px; margin: 0 auto; padding: 20px; min-height: 100vh; display: flex; flex-direction: column; position: relative; }

        /* Language Toggle */
        .lang-btn {
            background: #ff9800;
            border: none;
            padding: 8px 15px;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9rem;
            font-weight: bold;
            color: white;
            transition: background 0.3s;
            margin-left: 1rem;
        }

        .lang-btn:hover {
            background: #f57c00;
        }

        /* Header & Tabs */
        .header { margin-bottom: 20px; margin-top: 10px; }
        h1 { color: #e65100; margin: 5px 0; font-size: 1.8rem; } /* Darker orange for contrast */
        p.subtitle { color: #666; margin: 0; font-size: 0.9rem; }

        .tabs { display: flex; justify-content: center; margin-bottom: 20px; background: #e0e0e0; border-radius: 25px; padding: 5px; flex-wrap: wrap; }
        .tab { flex: 1; padding: 10px 5px; cursor: pointer; border-radius: 20px; color: #666; font-weight: 600; transition: 0.3s; font-size: 0.85rem; white-space: nowrap; margin: 2px; }
        .tab.active { background-color: #ff9800; color: white; box-shadow: 0 2px 5px rgba(0,0,0,0.15); }

        /* Cards */
        .card { background-color: #ffffff; border-radius: 16px; padding: 24px; margin-bottom: 16px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); text-align: left; border: 1px solid #f0f0f0; }
        .card h3 { margin-top: 0; color: #333; font-size: 1.1rem; margin-bottom: 15px;}

        /* Inputs */
        .input-group { margin-bottom: 15px; display: flex; justify-content: space-between; align-items: center; }
        .label { color: #555; font-size: 0.9rem; flex-grow: 1; text-align: left; font-weight: 500; }
        .value-display { font-weight: bold; color: #333; } /* Dark text for value labels */

        /* Styled Number Inputs */
        input[type=number] {
            background-color: #f5f5f5;
            border: 1px solid #ddd;
            color: #333;
            padding: 10px;
            border-radius: 8px;
            width: 90px;
            text-align: center;
            font-size: 1rem;
            font-weight: bold;
            outline: none;
            transition: border-color 0.2s;
        }
        input[type=number]:focus { border-color: #ff9800; background-color: #fff; }

        /* Results */
        .result-box { text-align: center; margin-top: 10px; }
        .big-number { font-size: 2.5rem; font-weight: 800; color: #2e7d32; margin: 5px 0; } /* Green */
        .med-number { font-size: 1.8rem; font-weight: 700; color: #ff9800; }
        .small-note { color: #888; font-size: 0.8rem; }

        /* Visualization Bars */
        .bar-container { background-color: #e0e0e0; border-radius: 10px; height: 20px; width: 100%; margin: 10px 0; overflow: hidden; position: relative; }
        .bar-fill { height: 100%; background-color: #ff9800; width: 0%; transition: width 0.5s ease-out; }
        .bar-label { position: absolute; top: 0; left: 0; width: 100%; text-align: center; line-height: 20px; font-size: 0.75rem; color: white; text-shadow: 0 0 3px rgba(0,0,0,0.3); font-weight: 600; }

        /* Video Container */
        .video-wrapper { width: 100%; border-radius: 12px; overflow: hidden; box-shadow: 0 4px 12px rgba(0,0,0,0.1); background: #000; }
        video { width: 100%; display: block; }

        /* Buttons */
        .btn { background-color: #ff9800; border: none; padding: 16px; color: white; border-radius: 12px; font-size: 1.1rem; font-weight: bold; width: 100%; cursor: pointer; margin-top: auto; display: block; text-decoration: none; box-shadow: 0 4px 6px rgba(255, 152, 0, 0.2); transition: background-color 0.2s; box-sizing: border-box; text-align: center; }
        .btn:hover { background-color: #f57c00; }

        /* Info Box */
        .info-card { background-color: #fff3e0; border: 1px solid #ffe0b2; }
        .info-list { list-style: none; padding: 0; margin: 10px 0; font-size: 0.9rem; color: #555; }
        .info-list li { margin-bottom: 8px; padding-left: 20px; position: relative; }
        .info-list li::before { content: "•"; color: #ff9800; font-weight: bold; position: absolute; left: 0; }
        .quote { font-style: italic; color: #e65100; font-size: 0.9rem; margin-top: 15px; border-left: 3px solid #ff9800; padding-left: 10px; }

        /* Page Visibility */
        .page { display: none; animation: fadeIn 0.3s; }
        .page.active { display: block; }

        /* New ROI Styles */
        .roi-container { margin-top: 15px; padding-top: 15px; border-top: 1px solid #eee; }
        .roi-item { margin-bottom: 10px; }
        .roi-label { font-size: 0.9rem; color: #555; }
        .roi-value { font-size: 1.2rem; font-weight: 700; color: #e65100; }
        .small-roi-note { font-size: 0.7rem; color: #888; }


        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

<!-- Navigation -->
<nav>
    <div class="nav-container">
        <a href="home.html" class="logo">Solar Saver</a>
        <div class="hamburger" onclick="toggleMenu()">
            <span></span>
            <span></span>
            <span></span>
        </div>
        <div class="nav-menu">
            <ul>
                <li><a href="home.html" id="nav-home">Home</a></li>
                <li><a href="team.html" id="nav-team">Team</a></li>
                <li><a href="faq.html" id="nav-faq">FAQ</a></li>
                <li><a href="calculator.html" id="nav-calculator">Calculator</a></li>
                <li><a href="contact.html" id="nav-contact">Contact</a></li>
            </ul>
            <button class="lang-btn" onclick="toggleLanguage()">NL / EN</button>
        </div>
    </div>
</nav>

<div class="container">


    <div class="header">
        <h1>Solar Saver</h1>
        <p class="subtitle" id="subtitle-text">Neighborhood Shared Sandbattery</p>
    </div>

    <!-- Navigation Tabs -->
    <div class="tabs">
        <div class="tab active" onclick="switchTab('simple')" id="tab-simple">Simple</div>
        <div class="tab" onclick="switchTab('advanced')" id="tab-advanced">Surplus</div>
        <div class="tab" onclick="switchTab('pro')" id="tab-pro">Pro Calc</div>
        <div class="tab" onclick="switchTab('video')" id="tab-video">Video</div>
    </div>

    <!-- PAGE 1: SIMPLE CALCULATOR -->
    <div id="simple" class="page active">
        <div class="card">
            <h3 id="simple-h3">Your Situation</h3>
            <div class="input-group">
                <span class="label" id="label-panels">Number of Solar Panels</span>
                <input type="number" min="0" value="10" id="panels" oninput="calcSimple()">
            </div>
            <div class="input-group">
                <span class="label" id="label-bill">Monthly Energy Bill (&euro;)</span>
                <input type="number" min="0" value="180" id="bill" oninput="calcSimple()">
            </div>
        </div>
        <div class="card">
            <h3 id="results-h3">Estimated Results</h3>
            <div class="result-box">
                <div class="label" style="text-align: center;" id="label-annual">Annual Savings</div>
                <div class="big-number" id="savingDisplay">&euro; 420</div>
                <div class="small-note" id="note-annual">vs. Gas/Heat Pump</div>
            </div>

            <div class="roi-container">
                <div class="roi-item">
                    <div class="roi-label" id="label-roi-solar-simple">Solar Earn-Back Time</div>
                    <div class="roi-value" id="roiDisplay">4.5 Years</div>
                    <div class="small-roi-note" id="note-roi">Reduced from 7.5 years</div>
                </div>
                <div class="roi-item">
                    <div class="roi-label" id="label-roi-sand-simple">Connection Fee ROI</div>
                    <div class="roi-value" id="contributionRoiSimpleDisplay">9.7 Years</div>
                    <div class="small-roi-note" id="note-contribution-roi-simple">Time to earn back the connection fee.</div>
                </div>
            </div>
        </div>
    </div>

    <!-- PAGE 2: SURPLUS CALCULATOR -->
    <div id="advanced" class="page">
        <div class="card">
            <h3 id="advanced-h3" onclick="toggleAutoIncrementSurplus()">Your Surplus Energy</h3>
            <p class="label" style="margin-bottom: 15px; font-weight: 400; color: #666;" id="advanced-desc">How much electricity do you export to the grid per year?</p>
            <div class="input-group">
                <span class="label" id="label-excess">Excess Electricity (kWh)</span>
                <input type="number" min="0" value="2000" id="excess" oninput="calcAdvanced()">
            </div>
            <div class="input-group">
                <span class="label" id="label-panels-advanced">Number of Solar Panels</span>
                <input type="number" min="0" value="10" id="panels-advanced" oninput="calcAdvanced()">
            </div>
        </div>
        <div class="card">
            <h3 id="perf-h3">Sand Battery Performance</h3>
            <div class="input-group" style="margin-bottom: 0;">
                <span class="label" id="label-efficiency">Battery Efficiency</span>
                <span class="value-display">100%</span>
            </div>
            <hr style="border-color: #eee; opacity: 1; margin: 10px 0 20px 0;">

            <div style="margin-bottom: 20px;">
                <div class="label" style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                    <span id="label-waste">Energy Wasted (Grid)</span>
                    <span>0%</span>
                </div>
                <div class="bar-container">
                    <div class="bar-fill" style="width: 0%; background: #d32f2f;"></div>
                </div>
            </div>
            <div style="margin-bottom: 10px;">
                <div class="label" style="display: flex; justify-content: space-between; margin-bottom: 5px;">
                    <span style="color:#e65100; font-weight: 600;" id="label-stored">Neighborhood Shared Sandbattery</span>
                    <span style="color:#e65100; font-weight: 600;">100%</span>
                </div>
                <div class="bar-container">
                    <div class="bar-fill" style="width: 100%;"></div>
                    <div class="bar-label" id="storedDisplay">2000 kWh Heat Stored</div>
                </div>
            </div>
            <p class="small-note" style="margin-top: 5px;" id="note-perf">We use 100% of your surplus to heat the neighborhood.</p>
        </div>
        <div class="card">
            <h3 id="value-h3">Total Value Created</h3>
            <div class="result-box">
                <div class="label" style="text-align: center;" id="label-bonus">Your "Solar Bonus" Value</div>
                <div class="med-number" id="bonusDisplay">&euro; 240</div>
                <div class="small-note" id="note-bonus">Heat credits earned per year</div>
            </div>
            <hr style="border-color: #eee; opacity: 1; margin: 15px 0;">
            <div class="result-box">
                <div class="label" style="text-align: center;" id="label-total">Total Annual Bill Reduction</div>
                <div class="big-number" id="totalSaveDisplay">&euro; 440</div>
                <div class="small-note" id="note-total">Fixed Savings + Solar Bonus</div>
            </div>

            <div class="roi-container">
                <div class="roi-item">
                    <div class="roi-label" id="label-roi-solar-advanced">Solar Earn-Back Time</div>
                    <div class="roi-value" id="roiAdvancedDisplay">4.5 Years</div>
                </div>
                <div class="roi-item">
                    <div class="roi-label" id="label-roi-sand-advanced">Connection Fee ROI</div>
                    <div class="roi-value" id="contributionRoiAdvancedDisplay">9.7 Years</div>
                </div>
            </div>
        </div>
    </div>

    <!-- PAGE 3: PRO CALCULATOR (UPDATED) -->
    <div id="pro" class="page">
        <div class="card">
            <h3 id="pro-h3" onclick="toggleAutoIncrement()">Full Analysis</h3>
            <div class="input-group">
                <span class="label" id="label-pro-panels">Total Solar Panels</span>
                <input type="number" min="0" value="12" id="pro-panels" oninput="calcPro()">
            </div>
            <div class="input-group">
                <span class="label" id="label-pro-bill">Current Monthly Bill (&euro;)</span>
                <input type="number" min="50" value="200" id="pro-bill" oninput="calcPro()">
            </div>
            <div class="input-group">
                <span class="label" id="label-pro-excess">Excess Energy (kWh/yr)</span>
                <input type="number" min="0" value="2500" id="pro-excess" oninput="calcPro()">
            </div>
        </div>

        <div class="card">
            <h3 id="pro-results-h3">Your Personal Solar Saver Plan</h3>

            <div style="display:flex; justify-content:space-between; margin-bottom:10px; border-bottom:1px solid #eee; padding-bottom:10px;">
                <span class="label" id="breakdown-fixed">Fixed Maint. Savings</span>
                <span style="font-weight:bold; color:#2e7d32;" id="val-fixed">+ &euro;200</span>
            </div>
            <div style="display:flex; justify-content:space-between; margin-bottom:10px; border-bottom:1px solid #eee; padding-bottom:10px;">
                <span class="label" id="breakdown-eff">Efficiency Gain (8%)</span>
                <span style="font-weight:bold; color:#2e7d32;" id="val-eff">+ &euro;192</span>
            </div>
            <div style="display:flex; justify-content:space-between; margin-bottom:15px;">
                <span class="label" id="breakdown-solar">Solar Surplus Bonus</span>
                <span style="font-weight:bold; color:#e65100;" id="val-solar">+ &euro;300</span>
            </div>

            <div class="result-box" style="background:#f9fbe7; padding:15px; border-radius:10px; border:1px solid #c5e1a5;">
                <div class="label" style="text-align: center; color:#33691e;" id="label-pro-total">Total Annual Benefit</div>
                <div class="big-number" style="color:#33691e;" id="proTotalDisplay">&euro; 692</div>
            </div>

            <div class="roi-container">
                <div class="roi-item">
                    <div class="roi-label" id="label-pro-roi">Solar Earn-Back Time</div>
                    <div class="roi-value" id="proRoiDisplay">4.5 Years</div>
                </div>
                <div class="roi-item">
                    <div class="roi-label" id="label-contribution-roi">Connection Fee ROI</div>
                    <div class="roi-value" id="contributionRoiProDisplay">9.7 Years</div>
                    <div class="small-roi-note" id="note-contribution-roi">Time to earn back the connection fee.</div>
                </div>
            </div>
        </div>
    </div>

    <!-- PAGE 4: VIDEO TAB -->
    <div id="video" class="page">
        <div class="card" style="text-align: center;">
            <h3 id="video-h3">Our Prototype in Action</h3>
            <p class="small-note" style="margin-bottom: 15px;" id="video-desc">See how the Sand Battery powers a neighborhood.</p>

            <div class="video-wrapper">
                <video controls poster="https://via.placeholder.com/480x270/e0e0e0/888888?text=Video+Preview">
                    <source src="prototype video.mp4" type="video/mp4">
                    Your browser does not support the video tag.
                </video>
            </div>
        </div>
    </div>

    <!-- LOGIC SECTIONS -->

    <!-- Global Logic (Simple/Advanced Tabs) -->
    <div class="card info-card" id="info-section">
        <h3 style="color: #e65100; margin-bottom: 10px;" id="logic-h3">How We Calculate This</h3>
        <ul class="info-list">
            <li id="li-base"><strong>Base Savings:</strong> You save ~&euro;200/year by avoiding heat pump maintenance fees.</li>
            <li id="li-rate"><strong>Solar Value:</strong> We pay <strong>&euro;0.12/kWh</strong>. The grid only pays <strong>~&euro;0.04/kWh</strong> (or charges fees).</li>
            <li id="li-eff"><strong>Efficiency:</strong> Our bulk heating is ~8% cheaper than individual gas or electric systems.</li>
        </ul>
        <div class="quote" id="quote-text">
            "Our algorithm factors in post-2027 energy prices, beating grid export fees while undercutting gas prices."
        </div>
    </div>

    <!-- Pro Logic (Only visible on Pro Tab) -->
    <div class="card info-card" id="pro-info-section" style="display:none; background-color:#e3f2fd; border-color:#bbdefb;">
        <h3 style="color: #0277bd; margin-bottom: 10px;" id="pro-logic-h3">Pro Calculation Breakdown</h3>
        <ul class="info-list">
            <li id="li-pro-1"><strong>Comprehensive:</strong> Combines your specific bill savings with your exact surplus generation.</li>
            <li id="li-pro-2"><strong>Efficiency Included:</strong> The Solar Bonus calculation uses **100% efficiency** (1.0) to maximize your heat credit value.</li>
            <li id="li-pro-3"><strong>Result:</strong> This gives the most accurate projection of your financial advantage with Solar Saver.</li>
        </ul>
    </div>

    <a href="contact.html" class="btn" id="btn-join">Join the Pilot</a>

</div>

<script>

    // --- TRANSLATION DATA ---
    const translations = {
        en: {
            navHome: "Home",
            navTeam: "Team",
            navFaq: "FAQ",
            navCalculator: "Calculator",
            subtitle: "Neighborhood Shared Sandbattery",
            tabSimple: "Simple",
            tabAdvanced: "Surplus",
            tabPro: "Pro Calc",
            tabVideo: "Video",
            h3Simple: "Your Situation",
            lblPanels: "Number of Solar Panels",
            lblBill: "Monthly Energy Bill (€)",
            h3Results: "Estimated Results",
            lblAnnual: "Annual Savings",
            noteAnnual: "vs. Gas/Heat Pump",
            lblRoi: "Solar Earn-Back Time",
            noteRoi: "Reduced from 7.5 years",
            years: "Years",
            h3Advanced: "Your Surplus Energy",
            descAdvanced: "How much electricity do you export to the grid per year?",
            lblExcess: "Excess Electricity (kWh)",
            lblPanelsAdvanced: "Number of Solar Panels",
            h3Perf: "Sand Battery Performance",
            lblEfficiency: "Battery Efficiency",
            lblWaste: "Energy Wasted (Grid)",
            lblStored: "Neighborhood Shared Sandbattery",
            storedText: "Heat Stored",
            notePerf: "We use 100% of your surplus to heat the neighborhood.",
            h3Value: "Total Value Created",
            lblBonus: "Your \"Solar Bonus\" Value",
            noteBonus: "Heat credits earned per year",
            lblTotal: "Total Annual Bill Reduction",
            noteTotal: "Fixed Savings + Solar Bonus",
            h3Pro: "Full Analysis",
            lblProPanels: "Total Solar Panels",
            lblProBill: "Current Monthly Bill (€)",
            lblProExcess: "Excess Energy (kWh/yr)",
            lblProEff: "Battery Efficiency Used",
            h3ProResults: "Your Personal Solar Saver Plan",
            lblBreakFixed: "Fixed Maint. Savings",
            lblBreakEff: "Efficiency Gain (8%)",
            lblBreakSolar: "Solar Surplus Bonus",
            lblProTotal: "Total Annual Benefit",
            lblProRoi: "Solar Earn-Back Time",
            h3Video: "Our Prototype in Action",
            descVideo: "See how the Sand Battery powers a neighborhood.",
            h3Logic: "How We Calculate This",
            liBase: "<strong>Base Savings:</strong> You save ~&euro;200/year by avoiding heat pump maintenance fees.",
            liRate: "<strong>Solar Value:</strong> We pay <strong>&euro;0.12/kWh</strong>. The grid only pays <strong>~&euro;0.04/kWh</strong> (or charges fees).",
            liEff: "<strong>Efficiency:</strong> Our bulk heating is ~8% cheaper than individual gas or electric systems.",
            quote: "\"Our algorithm factors in post-2027 energy prices, beating grid export fees while undercutting gas prices.\"",
            h3ProLogic: "Pro Calculation Breakdown",
            liPro1: "<strong>Comprehensive:</strong> Combines your specific bill savings with your exact surplus generation.",
            liPro2: "<strong>Efficiency Included:</strong> The Solar Bonus calculation uses **100% efficiency** (1.0) to maximize your heat credit value.",
            liPro3: "<strong>Result:</strong> This gives the most accurate projection of your financial advantage with Solar Saver.",
            lblContributionRoi: "Connection Fee ROI",
            noteContributionRoi: "Time to earn back the connection fee.",
            lblRoiSolarSimple: "Solar Earn-Back Time",
            lblRoiSandSimple: "Connection Fee ROI",
            noteContributionRoiSimple: "Time to earn back the connection fee.",
            lblRoiSolarAdvanced: "Solar Earn-Back Time",
            lblRoiSandAdvanced: "Connection Fee ROI",
            btnJoin: "Join the Pilot"
        },
        nl: {
            navHome: "Home",
            navTeam: "Team",
            navFaq: "FAQ",
            navCalculator: "Calculator",
            subtitle: "Gedeelde Buurt Zandbatterij",
            tabSimple: "Simpel",
            tabAdvanced: "Overschot",
            tabPro: "Pro Calc",
            tabVideo: "Video",
            h3Simple: "Uw Situatie",
            lblPanels: "Aantal Zonnepanelen",
            lblBill: "Maandelijkse Energierekening (€)",
            h3Results: "Geschatte Resultaten",
            lblAnnual: "Jaarlijkse Besparing",
            noteAnnual: "t.o.v. Gas/Warmtepomp",
            lblRoi: "Terugverdientijd Panelen",
            noteRoi: "Verlaagd van 7,5 jaar",
            years: "Jaar",
            h3Advanced: "Uw Energieoverschot",
            descAdvanced: "Hoeveel stroom levert u jaarlijks terug aan het net?",
            lblExcess: "Overtollige Stroom (kWh)",
            lblPanelsAdvanced: "Aantal Zonnepanelen",
            h3Perf: "Zandbatterij Prestaties",
            lblEfficiency: "Batterij Efficiëntie",
            lblWaste: "Verspilde Energie (Net)",
            lblStored: "Gedeelde Buurt Zandbatterij",
            storedText: "Warmte Opgeslagen",
            notePerf: "We gebruiken 100% van uw overschot om de buurt te verwarmen.",
            h3Value: "Gecreëerde Waarde",
            lblBonus: "Uw \"Zonne-Bonus\" Waarde",
            noteBonus: "Warmtekrediet per jaar verdiend",
            lblTotal: "Totale Verlaging Energierekening",
            noteTotal: "Vaste Besparing + Zonne-Bonus",
            h3Pro: "Volledige Analyse",
            lblProPanels: "Totaal Zonnepanelen",
            lblProBill: "Huidige Maandelijkse Rekening (€)",
            lblProExcess: "Overtollige Energie (kWh/jr)",
            lblProEff: "Batterij Efficiëntie Gebruikt",
            h3ProResults: "Uw Persoonlijke Solar Saver Plan",
            lblBreakFixed: "Vaste Onderhoudsbesparing",
            lblBreakEff: "Efficiëntiewinst (8%)",
            lblBreakSolar: "Zonne-Overschot Bonus",
            lblProTotal: "Totaal Jaarlijks Voordeel",
            lblProRoi: "Terugverdientijd Panelen",
            h3Video: "Onze Prototype in Actie",
            descVideo: "Zie hoe de Zandbatterij een buurt van energie voorziet.",
            h3Logic: "Hoe we dit berekenen",
            liBase: "<strong>Basisbesparing:</strong> U bespaart ~&euro;200/jaar door onderhoudskosten van warmtepompen te vermijden.",
            liRate: "<strong>Zonne-waarde:</strong> Wij betalen <strong>&euro;0,12/kWh</strong>. Het net betaalt slechts <strong>~&euro;0,04/kWh</strong> (of rekent kosten).",
            liEff: "<strong>Efficiëntie:</strong> Onze collectieve verwarming is ~8% goedkoper dan individuele gas- of elektrische systemen.",
            quote: "\"Ons algoritme houdt rekening met energieprijzen na 2027: beter dan terugleverkosten en goedkoper dan gas.\"",
            h3ProLogic: "Pro Berekening Uitleg",
            liPro1: "<strong>Compleet:</strong> Combineert uw specifieke rekeningbesparing met uw exacte overschot.",
            liPro2: "<strong>Efficiëntie Inbegrepen:</strong> De Zonne-Bonus berekening gebruikt **100% efficiëntie** (1.0) om uw warmtekredietwaarde te maximaliseren.",
            liPro3: "<strong>Resultaat:</strong> Dit geeft de meest nauwkeurige projectie van uw voordeel met Solar Saver.",
            lblContributionRoi: "Aansluitkosten Terugverdientijd",
            noteContributionRoi: "Tijd om de aansluitkosten terug te verdienen." ,
            lblRoiSolarSimple: "Terugverdientijd Panelen",
            lblRoiSandSimple: "Aansluitkosten Terugverdientijd",
            noteContributionRoiSimple: "Tijd om de aansluitkosten terug te verdienen.",
            lblRoiSolarAdvanced: "Terugverdientijd Panelen",
            lblRoiSandAdvanced: "Aansluitkosten Terugverdientijd",
            btnJoin: "Meld u aan voor de Pilot"
        }
    };

    let currentLang = 'en';

    // --- LOGIC START ---

    // Helper function to calculate Contribution ROI based on Total Benefit
    function calculateContributionRoi(totalBenefit) {
        const CONTRIBUTION_FEE = 5337; // €5337 is the max regulated connection fee.
        const AVOIDED_MAINTENANCE = 150; // Add maintenance saving back into ROI calculation
        let roiBenefit = totalBenefit + AVOIDED_MAINTENANCE;
        let contributionRoi = (roiBenefit > 0) ? CONTRIBUTION_FEE / roiBenefit : 99;
        return contributionRoi;
    }

    // Helper function to calculate Solar ROI
    function calculateSolarRoi(panels) {
        let roi = 7.5 - (panels * 0.12);
        if (roi < 4.0) roi = 4.0;
        return roi;
    }

    function applyTranslations() {
        const t = translations[currentLang];

        // Navigation
        document.getElementById("nav-home").textContent = t.navHome;
        document.getElementById("nav-team").textContent = t.navTeam;
        document.getElementById("nav-faq").textContent = t.navFaq;
        document.getElementById("nav-calculator").textContent = t.navCalculator;

        // Simple Tab
        document.getElementById("subtitle-text").innerHTML = t.subtitle;
        document.getElementById("tab-simple").innerHTML = t.tabSimple;
        document.getElementById("tab-advanced").innerHTML = t.tabAdvanced;
        document.getElementById("tab-pro").innerHTML = t.tabPro;
        document.getElementById("tab-video").innerHTML = t.tabVideo;
        document.getElementById("simple-h3").innerHTML = t.h3Simple;
        document.getElementById("label-panels").innerHTML = t.lblPanels;
        document.getElementById("label-bill").innerHTML = t.lblBill;
        document.getElementById("results-h3").innerHTML = t.h3Results;
        document.getElementById("label-annual").innerHTML = t.lblAnnual;
        document.getElementById("note-annual").innerHTML = t.noteAnnual;

        // Updated ROI Labels in Simple Tab
        document.getElementById("label-roi-solar-simple").innerHTML = t.lblRoiSolarSimple;
        document.getElementById("note-roi").innerHTML = t.noteRoi;
        document.getElementById("label-roi-sand-simple").innerHTML = t.lblRoiSandSimple;
        document.getElementById("note-contribution-roi-simple").innerHTML = t.noteContributionRoiSimple;

        // Advanced Tab
        document.getElementById("advanced-h3").innerHTML = t.h3Advanced;
        document.getElementById("advanced-desc").innerHTML = t.descAdvanced;
        document.getElementById("label-excess").innerHTML = t.lblExcess;
        document.getElementById("label-panels-advanced").innerHTML = t.lblPanelsAdvanced;
        document.getElementById("perf-h3").innerHTML = t.h3Perf;
        document.getElementById("label-efficiency").innerHTML = t.lblEfficiency;
        document.getElementById("label-waste").innerHTML = t.lblWaste;
        document.getElementById("label-stored").innerHTML = t.lblStored;
        document.getElementById("note-perf").innerHTML = t.notePerf;
        document.getElementById("value-h3").innerHTML = t.h3Value;
        document.getElementById("label-bonus").innerHTML = t.lblBonus;
        document.getElementById("note-bonus").innerHTML = t.noteBonus;
        document.getElementById("label-total").innerHTML = t.lblTotal;
        document.getElementById("note-total").innerHTML = t.noteTotal;

        // Updated ROI Labels in Advanced Tab
        document.getElementById("label-roi-solar-advanced").innerHTML = t.lblRoiSolarAdvanced;
        document.getElementById("label-roi-sand-advanced").innerHTML = t.lblRoiSandAdvanced;

        // Pro Tab
        document.getElementById("pro-h3").innerHTML = t.h3Pro;
        document.getElementById("label-pro-panels").innerHTML = t.lblProPanels;
        document.getElementById("label-pro-bill").innerHTML = t.lblProBill;
        document.getElementById("label-pro-excess").innerHTML = t.lblProExcess;
        document.getElementById("label-pro-eff").innerHTML = t.lblProEff;
        document.getElementById("pro-results-h3").innerHTML = t.h3ProResults;
        document.getElementById("breakdown-fixed").innerHTML = t.lblBreakFixed;
        document.getElementById("breakdown-eff").innerHTML = t.lblBreakEff;
        document.getElementById("breakdown-solar").innerHTML = t.lblBreakSolar;
        document.getElementById("label-pro-total").innerHTML = t.lblProTotal;
        document.getElementById("lblProRoi").innerHTML = t.lblProRoi;
        document.getElementById("label-contribution-roi").innerHTML = t.lblContributionRoi;
        document.getElementById("note-contribution-roi").innerHTML = t.noteContributionRoi;

        // General
        document.getElementById("video-h3").innerHTML = t.h3Video;
        document.getElementById("video-desc").innerHTML = t.descVideo;
        document.getElementById("logic-h3").innerHTML = t.h3Logic;
        document.getElementById("li-base").innerHTML = t.liBase;
        document.getElementById("li-rate").innerHTML = t.liRate;
        document.getElementById("li-eff").innerHTML = t.liEff;
        document.getElementById("quote-text").innerHTML = t.quote;
        document.getElementById("pro-logic-h3").innerHTML = t.h3ProLogic;
        document.getElementById("li-pro-1").innerHTML = t.liPro1;
        document.getElementById("li-pro-2").innerHTML = t.liPro2;
        document.getElementById("li-pro-3").innerHTML = t.liPro3;
        document.getElementById("btn-join").innerHTML = t.btnJoin;

        // Re-run calcs to update labels inside logic
        calcSimple();
        calcAdvanced();
        calcPro();
    }

    function toggleLanguage() {
        currentLang = currentLang === 'en' ? 'nl' : 'en';
        // Save language preference
        localStorage.setItem('solarSaverLang', currentLang);
        applyTranslations();
    }

    function switchTab(tabName) {
        // Hide all pages
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));

        // Show selected
        document.getElementById(tabName).classList.add('active');
        document.getElementById('tab-'+tabName).classList.add('active');

        // Logic Sections Visibility
        if(tabName === 'simple' || tabName === 'advanced') {
            document.getElementById('info-section').style.display = 'block';
            document.getElementById('pro-info-section').style.display = 'none';
        } else if (tabName === 'pro') {
            document.getElementById('info-section').style.display = 'none';
            document.getElementById('pro-info-section').style.display = 'block';
        } else {
            // Video
            document.getElementById('info-section').style.display = 'none';
            document.getElementById('pro-info-section').style.display = 'none';
        }
    }

    function calcSimple() {
        let pInput = document.getElementById("panels").value;
        let bInput = document.getElementById("bill").value;

        let p = pInput ? parseInt(pInput) : 0;
        let b = bInput ? parseInt(bInput) : 0;

        let annualSavings = 200 + (b * 12 * 0.08) + (p * 15);

        // Calculate ROIs
        let solarRoi = calculateSolarRoi(p);
        let contributionRoi = calculateContributionRoi(annualSavings);

        let solarRoiString = solarRoi.toFixed(1);
        let contributionRoiString = contributionRoi.toFixed(1);

        if(currentLang === 'nl') {
            solarRoiString = solarRoiString.replace('.', ',');
            contributionRoiString = contributionRoiString.replace('.', ',');
        }

        document.getElementById("savingDisplay").innerText = "\u20AC " + Math.round(annualSavings);
        document.getElementById("roiDisplay").innerText = solarRoiString + " " + translations[currentLang].years;
        document.getElementById("contributionRoiSimpleDisplay").innerText = contributionRoiString + " " + translations[currentLang].years;
    }

    function calcAdvanced() {
        let excessInput = document.getElementById("excess").value;
        let pInput = document.getElementById("panels-advanced").value;

        let excess = excessInput ? parseInt(excessInput) : 0;
        let p = pInput ? parseInt(pInput) : 0;

        const EFFICIENCY_FACTOR = 1.0;
        const FIXED_SAVINGS = 200;

        document.getElementById("storedDisplay").innerText = excess + " kWh " + translations[currentLang].storedText;

        // Solar Bonus = Excess * Price per kWh * 100% Efficiency
        let bonusValue = excess * 0.12 * EFFICIENCY_FACTOR;
        let totalSavings = FIXED_SAVINGS + bonusValue;

        // Calculate ROIs
        let solarRoi = calculateSolarRoi(p);
        let contributionRoi = calculateContributionRoi(totalSavings);

        let solarRoiString = solarRoi.toFixed(1);
        let contributionRoiString = contributionRoi.toFixed(1);

        if(currentLang === 'nl') {
            solarRoiString = solarRoiString.replace('.', ',');
            contributionRoiString = contributionRoiString.replace('.', ',');
        }

        document.getElementById("bonusDisplay").innerText = "\u20AC " + Math.round(bonusValue);
        document.getElementById("totalSaveDisplay").innerText = "\u20AC " + Math.round(totalSavings);
        document.getElementById("roiAdvancedDisplay").innerText = solarRoiString + " " + translations[currentLang].years;
        document.getElementById("contributionRoiAdvancedDisplay").innerText = contributionRoiString + " " + translations[currentLang].years;
    }

    function calcPro() {
        // Inputs
        let panelsInput = document.getElementById("pro-panels").value;
        let billInput = document.getElementById("pro-bill").value;
        let excessInput = document.getElementById("pro-excess").value;

        let panels = panelsInput ? parseInt(panelsInput) : 0;
        let bill = billInput ? parseInt(billInput) : 0;
        let excess = excessInput ? parseInt(excessInput) : 0;

        // --- FINANCIAL LOGIC ---
        const EFFICIENCY_FACTOR = 1.0;

        let fixedSavings = 200;
        let efficiencyGain = (bill * 12) * 0.08;
        let solarBonus = excess * 0.12 * EFFICIENCY_FACTOR;

        let totalBenefit = fixedSavings + efficiencyGain + solarBonus;

        // --- ROI CALCULATIONS ---

        let solarRoi = calculateSolarRoi(panels);
        let contributionRoi = calculateContributionRoi(totalBenefit);

        // --- END LOGIC ---

        // Update UI Breakdown
        document.getElementById("val-fixed").innerText = "+ \u20AC " + fixedSavings;
        document.getElementById("val-eff").innerText = "+ \u20AC " + Math.round(efficiencyGain);
        document.getElementById("val-solar").innerText = "+ \u20AC " + Math.round(solarBonus);
        document.getElementById("proTotalDisplay").innerText = "\u20AC " + Math.round(totalBenefit);

        // Format ROI
        let solarRoiString = solarRoi.toFixed(1);
        let contributionRoiString = contributionRoi.toFixed(1);

        if(currentLang === 'nl') {
            solarRoiString = solarRoiString.replace('.', ',');
            contributionRoiString = contributionRoiString.replace('.', ',');
        }

        document.getElementById("proRoiDisplay").innerText = solarRoiString + " " + translations[currentLang].years;
        document.getElementById("contributionRoiProDisplay").innerText = contributionRoiString + " " + translations[currentLang].years;
    }

    // Auto-increment functionality for Pro Calc
    let autoIncrementInterval = null;
    let isAutoIncrementing = false;

    function toggleAutoIncrement() {
        const excessInput = document.getElementById("pro-excess");

        if (!isAutoIncrementing) {
            // Start auto-increment
            isAutoIncrementing = true;

            // Set default values
            document.getElementById("pro-panels").value = 12;
            document.getElementById("pro-bill").value = 200;
            excessInput.value = 0; // Start from 0

            // Start incrementing excess energy
            autoIncrementInterval = setInterval(() => {
                let currentValue = parseInt(excessInput.value) || 0;
                currentValue += 1; // Increment by 1 kWh each step (very smooth)
                excessInput.value = currentValue;
                calcPro(); // Update calculations in real-time
            }, 200); // Update every 200ms for slower, smooth animation
        } else {
            // Stop auto-increment
            stopAutoIncrement();
        }
    }

    function stopAutoIncrement() {
        if (autoIncrementInterval) {
            clearInterval(autoIncrementInterval);
            autoIncrementInterval = null;
        }
        isAutoIncrementing = false;
    }

    // Auto-increment functionality for Surplus tab
    let autoIncrementIntervalSurplus = null;
    let isAutoIncrementingSurplus = false;

    function toggleAutoIncrementSurplus() {
        const excessInput = document.getElementById("excess");

        if (!isAutoIncrementingSurplus) {
            // Start auto-increment
            isAutoIncrementingSurplus = true;

            // Set default values
            document.getElementById("panels-advanced").value = 10;
            excessInput.value = 0; // Start from 0

            // Start incrementing excess energy
            autoIncrementIntervalSurplus = setInterval(() => {
                let currentValue = parseInt(excessInput.value) || 0;
                currentValue += 1; // Increment by 1 kWh each step (very smooth)
                excessInput.value = currentValue;
                calcAdvanced(); // Update calculations in real-time
            }, 200); // Update every 200ms for slower, smooth animation
        } else {
            // Stop auto-increment
            stopAutoIncrementSurplus();
        }
    }

    function stopAutoIncrementSurplus() {
        if (autoIncrementIntervalSurplus) {
            clearInterval(autoIncrementIntervalSurplus);
            autoIncrementIntervalSurplus = null;
        }
        isAutoIncrementingSurplus = false;
    }

    // Initialize
    calcSimple();
    calcAdvanced();
    calcPro();

    function toggleMenu() {
        const hamburger = document.querySelector('.hamburger');
        const navMenu = document.querySelector('.nav-menu');
        hamburger.classList.toggle('active');
        navMenu.classList.toggle('active');
    }

    // Close menu when clicking on a link
    document.querySelectorAll('.nav-menu a').forEach(link => {
        link.addEventListener('click', () => {
            const hamburger = document.querySelector('.hamburger');
            const navMenu = document.querySelector('.nav-menu');
            hamburger.classList.remove('active');
            navMenu.classList.remove('active');
        });
    });


    // --- LOGIC END ---
</script>

</body>
</html>
